{"ast":null,"code":"'use strict';\n\nvar fs = require('fs');\n\nvar path = require('path');\n\nvar encodeVersion = require('./encodeVersion');\n\nvar getSDKFeatureCode = require('./getSDKFeatureCode');\n\nvar SDKCode = 'M'; // Constant per SDK\n\n/**\n * @description Removes patch version from the semver if it exists\n *              Turns x.y.z OR x.y into x.y\n * @param {'x.y.z' || 'x.y' || string} semVerStr\n */\n\nfunction removePatchFromSemver(semVerStr) {\n  var parts = semVerStr.split('.');\n  return `${parts[0]}.${parts[1]}`;\n}\n/**\n * @description Gets the SDK signature by encoding the SDK version and node version\n * @param {{responsive:boolean}} features\n * @param {'default' | 'x.y.z' | 'x.y' | string} useSDKVersion Default uses package.json version\n * @param {'default' | 'x.y.z' | 'x.y' | string} useNodeVersion Default uses process.versions.node\n * @return {string} encodedSDK sdkVersionID\n */\n\n\nfunction getSDKVersionID() {\n  var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var useSDKVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n  var useNodeVersion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'default';\n\n  try {\n    // allow to pass a custom SDKVersion\n    var pkgJSONFile = fs.readFileSync(path.join(__dirname, '../../../../package.json'), 'utf-8');\n    var sdkVersion = useSDKVersion === 'default' ? JSON.parse(pkgJSONFile).version : useSDKVersion; // allow to pass a custom nodeVersion\n\n    var nodeVersion = useNodeVersion === 'default' ? process.versions.node : useNodeVersion; // Node version should always be in x.y format\n\n    var twoPartNodeVersion = removePatchFromSemver(nodeVersion);\n    var encodedSDKVersion = encodeVersion(sdkVersion);\n    var encodedNodeVersion = encodeVersion(twoPartNodeVersion);\n    var featureCode = getSDKFeatureCode(features);\n    return `${SDKCode}${encodedSDKVersion}${encodedNodeVersion}${featureCode}`;\n  } catch (e) {\n    // Either SDK or Node versions were unparsable\n    return 'E';\n  }\n}\n\nmodule.exports = getSDKVersionID;","map":{"version":3,"sources":["/Users/dannyvera/Documents/general-assembly/sei/bees/unit_2/photo-collab-proj-2/PhotoCollaboration-SEI-Project2/photo-collab/node_modules/cloudinary/lib-es5/utils/encoding/sdkVersionID/getSDKVersionID.js"],"names":["fs","require","path","encodeVersion","getSDKFeatureCode","SDKCode","removePatchFromSemver","semVerStr","parts","split","getSDKVersionID","features","arguments","length","undefined","useSDKVersion","useNodeVersion","pkgJSONFile","readFileSync","join","__dirname","sdkVersion","JSON","parse","version","nodeVersion","process","versions","node","twoPartNodeVersion","encodedSDKVersion","encodedNodeVersion","featureCode","e","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIE,aAAa,GAAGF,OAAO,CAAC,iBAAD,CAA3B;;AACA,IAAIG,iBAAiB,GAAGH,OAAO,CAAC,qBAAD,CAA/B;;AACA,IAAII,OAAO,GAAG,GAAd,C,CAAmB;;AAGnB;;;;;;AAKA,SAASC,qBAAT,CAA+BC,SAA/B,EAA0C;AACxC,MAAIC,KAAK,GAAGD,SAAS,CAACE,KAAV,CAAgB,GAAhB,CAAZ;AAEA,SAAQ,GAAED,KAAK,CAAC,CAAD,CAAI,IAAGA,KAAK,CAAC,CAAD,CAAI,EAA/B;AACD;AAED;;;;;;;;;AAOA,SAASE,eAAT,GAA2B;AACzB,MAAIC,QAAQ,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAnF;AACA,MAAIG,aAAa,GAAGH,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,SAAxF;AACA,MAAII,cAAc,GAAGJ,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,SAAzF;;AAEA,MAAI;AACF;AACA,QAAIK,WAAW,GAAGjB,EAAE,CAACkB,YAAH,CAAgBhB,IAAI,CAACiB,IAAL,CAAUC,SAAV,EAAqB,0BAArB,CAAhB,EAAkE,OAAlE,CAAlB;AAEA,QAAIC,UAAU,GAAGN,aAAa,KAAK,SAAlB,GAA8BO,IAAI,CAACC,KAAL,CAAWN,WAAX,EAAwBO,OAAtD,GAAgET,aAAjF,CAJE,CAMF;;AACA,QAAIU,WAAW,GAAGT,cAAc,KAAK,SAAnB,GAA+BU,OAAO,CAACC,QAAR,CAAiBC,IAAhD,GAAuDZ,cAAzE,CAPE,CASF;;AACA,QAAIa,kBAAkB,GAAGvB,qBAAqB,CAACmB,WAAD,CAA9C;AACA,QAAIK,iBAAiB,GAAG3B,aAAa,CAACkB,UAAD,CAArC;AACA,QAAIU,kBAAkB,GAAG5B,aAAa,CAAC0B,kBAAD,CAAtC;AACA,QAAIG,WAAW,GAAG5B,iBAAiB,CAACO,QAAD,CAAnC;AAEA,WAAQ,GAAEN,OAAQ,GAAEyB,iBAAkB,GAAEC,kBAAmB,GAAEC,WAAY,EAAzE;AACD,GAhBD,CAgBE,OAAOC,CAAP,EAAU;AACV;AACA,WAAO,GAAP;AACD;AACF;;AAEDC,MAAM,CAACC,OAAP,GAAiBzB,eAAjB","sourcesContent":["'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\nvar encodeVersion = require('./encodeVersion');\nvar getSDKFeatureCode = require('./getSDKFeatureCode');\nvar SDKCode = 'M'; // Constant per SDK\n\n\n/**\n * @description Removes patch version from the semver if it exists\n *              Turns x.y.z OR x.y into x.y\n * @param {'x.y.z' || 'x.y' || string} semVerStr\n */\nfunction removePatchFromSemver(semVerStr) {\n  var parts = semVerStr.split('.');\n\n  return `${parts[0]}.${parts[1]}`;\n}\n\n/**\n * @description Gets the SDK signature by encoding the SDK version and node version\n * @param {{responsive:boolean}} features\n * @param {'default' | 'x.y.z' | 'x.y' | string} useSDKVersion Default uses package.json version\n * @param {'default' | 'x.y.z' | 'x.y' | string} useNodeVersion Default uses process.versions.node\n * @return {string} encodedSDK sdkVersionID\n */\nfunction getSDKVersionID() {\n  var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var useSDKVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n  var useNodeVersion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'default';\n\n  try {\n    // allow to pass a custom SDKVersion\n    var pkgJSONFile = fs.readFileSync(path.join(__dirname, '../../../../package.json'), 'utf-8');\n\n    var sdkVersion = useSDKVersion === 'default' ? JSON.parse(pkgJSONFile).version : useSDKVersion;\n\n    // allow to pass a custom nodeVersion\n    var nodeVersion = useNodeVersion === 'default' ? process.versions.node : useNodeVersion;\n\n    // Node version should always be in x.y format\n    var twoPartNodeVersion = removePatchFromSemver(nodeVersion);\n    var encodedSDKVersion = encodeVersion(sdkVersion);\n    var encodedNodeVersion = encodeVersion(twoPartNodeVersion);\n    var featureCode = getSDKFeatureCode(features);\n\n    return `${SDKCode}${encodedSDKVersion}${encodedNodeVersion}${featureCode}`;\n  } catch (e) {\n    // Either SDK or Node versions were unparsable\n    return 'E';\n  }\n}\n\nmodule.exports = getSDKVersionID;"]},"metadata":{},"sourceType":"script"}